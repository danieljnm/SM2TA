<?xml version="1.0" encoding="utf-8"?>
<nta>
	<declaration>
		int battery_level_ = 15;
		int orders_ = 10;
		chan Success, gen_SsProcessOrder_inner_start;
	</declaration>
	<template>
		<name>Tbot</name>
		<location id="StStartup" x="0" y="0">
			<name x="-15" y="15">StStartup</name>
		</location>
		<location id="gen_pre_SsProcessOrder" x="400" y="0">
			<name x="385" y="15">gen_pre_SsProcessOrder</name>
			<committed/>
		</location>
		<location id="SsProcessOrder" x="800" y="0">
			<name x="785" y="15">SsProcessOrder</name>
		</location>
		<location id="StQueue" x="1200" y="0">
			<name x="1185" y="15">StQueue</name>
		</location>
		<location id="StBatteryDepleted" x="0" y="300">
			<name x="-15" y="315">StBatteryDepleted</name>
		</location>
		<location id="StNavigateToBase" x="400" y="300">
			<name x="385" y="315">StNavigateToBase</name>
		</location>
		<location id="StRecharge" x="800" y="300">
			<name x="785" y="315">StRecharge</name>
		</location>
		<init ref="StStartup"/>
		<transition>
			<source ref="StStartup"/>
			<target ref="StQueue"/>
			<label kind="guard" x="550" y="15"></label>
		</transition>
		<transition>
			<source ref="gen_pre_SsProcessOrder"/>
			<target ref="SsProcessOrder"/>
			<label kind="synchronisation" x="550" y="15">gen_SsProcessOrder_inner_start!</label>
		</transition>
		<transition>
			<source ref="SsProcessOrder"/>
			<target ref="StQueue"/>
			<label kind="synchronisation" x="950" y="15">Success?</label>
		</transition>
		<transition>
			<source ref="StQueue"/>
			<target ref="StBatteryDepleted"/>
			<label kind="guard" x="550" y="165">!(battery_level_ &lt;= 0)</label>
		</transition>
		<transition>
			<source ref="StQueue"/>
			<target ref="StNavigateToBase"/>
			<label kind="guard" x="750" y="165"></label>
		</transition>
		<transition>
			<source ref="StQueue"/>
			<target ref="StRecharge"/>
			<label kind="guard" x="950" y="165">battery_level_ &lt;= 20</label>
		</transition>
		<transition>
			<source ref="StQueue"/>
			<target ref="StNavigateToBase"/>
			<label kind="guard" x="750" y="180">battery_level_ &lt;= 20</label>
		</transition>
		<transition>
			<source ref="StQueue"/>
			<target ref="gen_pre_SsProcessOrder"/>
			<label kind="guard" x="750" y="15">!(battery_level_ &lt;= 20) &amp;&amp; !orders_ == 0</label>
		</transition>
		<transition>
			<source ref="StNavigateToBase"/>
			<target ref="StQueue"/>
			<label kind="guard" x="750" y="165"></label>
		</transition>
		<transition>
			<source ref="StRecharge"/>
			<target ref="StQueue"/>
			<label kind="guard" x="950" y="165"></label>
		</transition>
	</template>
	<template>
		<name>SsProcessOrder_inner</name>
		<location id="gen_init" x="0" y="0">
			<name x="-15" y="15">gen_init</name>
		</location>
		<location id="StiNavigateToCoffeeMachine" x="400" y="0">
			<name x="385" y="15">StiNavigateToCoffeeMachine</name>
		</location>
		<location id="StiWaitForOrder" x="800" y="0">
			<name x="785" y="15">StiWaitForOrder</name>
		</location>
		<location id="StiDeliverOrder" x="1200" y="0">
			<name x="1185" y="15">StiDeliverOrder</name>
		</location>
		<location id="SsProcessOrderSuccess" x="0" y="300">
			<name x="-15" y="315">SsProcessOrderSuccess</name>
			<committed/>
		</location>
		<init ref="gen_init"/>
		<transition>
			<source ref="gen_init"/>
			<target ref="StiNavigateToCoffeeMachine"/>
			<label kind="synchronisation" x="150" y="15">gen_SsProcessOrder_inner_start?</label>
		</transition>
		<transition>
			<source ref="StiNavigateToCoffeeMachine"/>
			<target ref="StiWaitForOrder"/>
		</transition>
		<transition>
			<source ref="StiWaitForOrder"/>
			<target ref="StiDeliverOrder"/>
		</transition>
		<transition>
			<source ref="StiDeliverOrder"/>
			<target ref="SsProcessOrderSuccess"/>
			<label kind="synchronisation" x="550" y="165">Success!</label>
		</transition>
		<transition>
			<source ref="SsProcessOrderSuccess"/>
			<target ref="gen_init"/>
		</transition>
	</template>
	<system>
		system Tbot, SsProcessOrder_inner;
	</system>
</nta>

